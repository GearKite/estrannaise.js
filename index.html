<!DOCTYPE html>
<html>

<head>
    <title>estrannaise.js</title>
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="48x48" href="img/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">

    <link rel="stylesheet" type="text/css" href="css/colors.css">
    <link rel="stylesheet" type="text/css" href="css/slider.css">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>

<body>

    <!-- <script src="lib/loggamma.js"></script> -->
    <script src="lib/d3.min.js"></script>
    <script src="lib/plot.min.js"></script>
    <script src="lib/math.min.js"></script>
    <script src="lib/papaparse.min.js"></script>
    <script src="data/modeldata.js"></script>
    <script src="src/models.js"></script>
    <script src="src/core.js"></script>
    <script src="src/plotting.js"></script>
    <script src="src/estrannaise.js"></script>

    <div id="container">
        <header>
            <!-- Good god this css is gory. -->
            <div id="header-div", style="display: flex; align-items: flex-start;">
                <div id="logo">
                    <img src="img/favicon-96x96.png" alt="estrannaise.js logo">
                </div>
                <div style="height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: space-between; margin-top: 1.2em;">
                    
                    <h1 style="margin-top: auto; margin-bottom: 0em;">estrannaise.js</h1>
                    
                    <div id="subtitle" style="display: flex; justify-content: space-between; width: 100%; align-items: flex-end;">

                        <h2 style="margin-right: auto; margin-bottom: 0em;">estradiol <a href="docs/">pharmacokinetics</a> playground</h2>
                        
                        <label class="switch" style="margin-left: 5em;">
                            <input type="checkbox" id="nightday-slider">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
            </div>
        </header>

        <div id="plot-region">

        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <div id="options" style="display: flex; margin-bottom: 1em; margin-right: auto;">
                <select class="dropdown-units" style="display: inline-block; margin-right: 0.6em;">
                    <option value="pg/mL">pg/mL</option> 
                    <option value="pmol/L">pmol/L</option> 
                </select>
                <select class="dropdown-daysinput" style="display: inline-block; margin-right: 0.6em;">
                    <option value="absolute">absolute days</option>
                    <option value="intervals">days as intervals</option>
                </select>
                <!-- <select class="dropdown-uncertaintytype" style="display: inline-block; margin-right: 0.6em;">
                    <option value="cloud">uncertainty cloud</option> 
                    <option value="range">uncertainty range</option> 
                    <option value="curves">uncertainty curves</option> 
                </select> -->
            </div>
            <div id="stashrecall-container" style="margin-bottom: 2em; margin-left: auto;">
                <button id="stash-button" class="flat-button" style="width: 7.5em;">stash all</button>
                <button id="recall-button" class="flat-button" style="width: 5em;">recall</button>
                <button id="delete-stash-button" class="flat-button" style="width: 9em;">delete stash</button>
                <button id="share-button" class="flat-button" style="width: 8em;">share url</button>
            </div>
        </div>

        <div class="sections-container" , id="sections-container">

            <div id="multidose-section">
                <span style="font-weight: bold;">multi-doses</span>
                <div id="multidose-buttons" style="margin-top: 1em;">
                    <button id="add-dose-button" class="flat-button">add</button>
                    <button id="guess-button" class="flat-button">add guess</button>
                    <button id="clear-doses-button" class="flat-button">clear</button>
                    <input type="file" id="csv-file" accept=".csv" style="display: none;">
                    <button id="import-csv-dialog" class="flat-button">import</button>
                    <button id="save-csv-button" class="flat-button">export</button>
                </div>
                <br>
                <div id="dragndrop-zone">
                    <table id="multidose-table">
                        <thead>
                            <tr>
                                <th style="text-align: center;">v</th>
                                <th style="text-align: center;">u</th>
                                <th style="text-align: center;">time (days)</th>
                                <th style="text-align: center;">dose (mg)</th>
                                <th style="text-align: center;">ester</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    <span style="font-weight: normal; font-size: 9px; display: block; text-align: center;">drag-n-drop
                        csv on table to import</span>
                </div>
            </div> <!-- multidose-section -->


            <div id="steadystate-section">
                <span style="font-weight: bold;">steady-states</span>
                <div id="bottom-button" style="margin-top: 1em;">
                    <button id="add-steadystate-button" class="flat-button">add</button>
                    <button id="clear-steadystates-button" class="flat-button">clear</button>
                </div>
                <br>
                <table id="steadystate-table">
                    <thead>
                        <tr>
                            <th style="text-align: center;">v</th>
                            <th style="text-align: center;">u</th>
                            <th style="text-align: center;">every (days)</th>
                            <th style="text-align: center;">dose (mg)</th>
                            <th style="text-align: center;">ester</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <span style="font-weight: normal; font-size: 9px;">&nbsp;</span>
            </div>

        </div> <!-- tables-container -->

        <!-- someone tell me why github pages don't render <footer> correctly? -->
        <div id="footer">
            <div style="width: 58em;">
                
                <p>remember <span style="color: var(--the-pink)">the line is a lie!</span> the cloud a little less so
                </p>
                
                <p>the cloud of blue points does not represent data points but is rather a visual representation of the uncertainty in model predictions
                </p>
                
                <p>it is important to emphasis that the cloud underestimates the total uncertainty in model predictions.
                    it only captures the uncertainty of something akin to a population mean rather than the full distribution of outcomes 
                    in the population at large. this is bound to change in the future when a better representation of this uncertainty is implemented
                </p>
                
                <p>inferences for the estradiol benzoate, valerate, and cypionate intramuscular depot models 
                    (<span style="color: var(--the-pink)">eb im</span>, <span style="color: var(--the-pink)">ev im</span>, <span style="color: var(--the-pink)">ec im</span>) 
                    use part of the data collected and made available by the amazing people behind the 
                    <a href="https://transfemscience.org/articles/injectable-e2-meta-analysis/" target="_blank">tfs meta-analysis</a>
                    but will be reprocessed in the future to generate a better quantification of uncertainty
                </p>
                
                <p>the data behind the estradiol undecylate model for intramuscular depot using castor oil (<span style="color: var(--the-pink)">eun im</span>) 
                    was entirely reprocessed from scratch using the per-patient data found in geppert 1975 and the dataset from vermeulen 1975 including 
                    the original reported uncertainty. this data is extremely sparse and incomplete and thus the model is highly uncertain 
                </p>    
                
                <p>the data behind the estradiol undecylate model for subcutaneous depots using castor oil 
                    (<span style="color: var(--the-pink)">eun casubq</span>) was infered on 
                    top of the eun im model by augmenting it with very sparse self-reported community data and is also highly uncertain
                </p>
                
                <p>the data behind the estradiol enanthate model for intramuscular depots using sunflower oil (<span style="color: var(--the-pink)">een im</span>)
                    was reprocessed from scratch using studies with perlutan done in the 80s and 90s. this data
                    is also extremely sparse and incomplete and the model highly uncertain
                </p>

                <p>the once-weekly patch model (<span style="color: var(--the-pink)">patch ow</span>) was infered using data found in drug labels
                    of once-weekly climara and menostar patches. the twice-weekly patch model (<span style="color: var(--the-pink)">patch tw</span>) was infered 
                    using data taken from two 2003 studies by houssain et al looking at
                    twice-weekly estradot and menorest patches, and in the drug label of twice-weekly mylan patches.
                    there is now way to change the wearing period of the patch in the interface yet 
                    (i.e. 3&frac12; and 7 days) but it is planned for the future
                </p>
                
                <p>with help encouragements and entertainment from emily torble lea annie izzy meringue photino
                    <br>and let's be honest github copilot
                </p>
                <br>
                <p>
                    <span style="font-weight: bold;">disclaimer</span><br>
                    this page, designed as a playground to explore estradiol pharmacokinetics, provides a simulation
                    for informational and entertainment purposes only. the developer(s) cannot guarantee the accuracy of
                    the
                    predictions generated by the simulator. users acknowledge that the software is offered "as is,"
                    without
                    any warranties.
                    the developer(s) assume no liability for direct or indirect damages, either physical, psychological,
                    or
                    otherwise, resulting from the use of the simulator.
                    users are strongly advised to exercise caution and seek professional medical advice for
                    health-related
                    queries.
                </p>
                <p>
                    estrannaise.js is entirely client-side. your data, whether entered, imported, or stashed,
                    remains exclusively within your browser and will never be transmitted to the developer(s) or any
                    third-party.
                </p>
            </div>
            <br>
            <p>estrannaise.js (v0.2.19)</p>
            <p>mit license (c) 2024 alix</p>
            <br>
            <p><span id="tipjar-text">xmr tip jar</span><br><span
                    id="copy-xmr">85pzJGdG6PF9XtH7hAPd5g54yxFkcTCfkednKYPyAUjBZJYrao3qgBF4ftHg4hkKXqgvohjiJgxn7NHMPaCBse7AAFQe4B6</span>
            </p>

        </div>
    </div>

</body>

</html>